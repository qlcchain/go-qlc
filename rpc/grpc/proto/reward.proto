syntax = "proto3";
package proto;

import "google/api/annotations.proto";
import "types/basic.proto";
import "types/contract.proto";
import "google/protobuf/wrappers.proto";


option go_package = ".;proto";

service RewardsAPI {
    rpc GetUnsignedRewardData (RewardsParam) returns (types.Hash) {
        option (google.api.http) = {
           post: "/rewards/getUnsignedRewardData"
           body: "*"
       };
    }

    rpc GetUnsignedConfidantData (RewardsParam) returns (types.Hash) {
        option (google.api.http) = {
           post: "/rewards/getUnsignedConfidantData"
           body: "*"
       };
    }

    rpc GetSendRewardBlock (RewardsParamWithSign) returns (types.StateBlock) {
        option (google.api.http) = {
           post: "/rewards/getSendRewardBlock"
           body: "*"
       };
    }
    
    rpc GetSendConfidantBlock (RewardsParamWithSign) returns (types.StateBlock) {
        option (google.api.http) = {
           post: "/rewards/getSendConfidantBlock"
           body: "*"
       };
    }

    rpc GetReceiveRewardBlock (types.Hash) returns (types.StateBlock) {
        option (google.api.http) = {
           post: "/rewards/getReceiveRewardBlock"
           body: "*"
       };
    }
    
    rpc IsAirdropRewards (google.protobuf.BytesValue) returns (google.protobuf.BoolValue) {
        option (google.api.http) = {
           post: "/rewards/isAirdropRewards"
           body: "*"
       };
    }

    rpc GetTotalRewards (google.protobuf.StringValue) returns (google.protobuf.Int64Value) {
        option (google.api.http) = {
           post: "/rewards/getTotalRewards"
           body: "*"
       };
    }

    rpc GetRewardsDetail (google.protobuf.StringValue) returns (RewardsInfos) {
        option (google.api.http) = {
           post: "/rewards/getRewardsDetail"
           body: "*"
       };
    }

    rpc GetConfidantRewards (types.Address) returns (ConfidantRewardsResponse) {
        option (google.api.http) = {
           post: "/rewards/getConfidantRewards"
           body: "*"
       };
    }

    rpc GetConfidantRewordsDetail (types.Address) returns (RewardsInfosByAddress) {
        option (google.api.http) = {
           post: "/rewards/getConfidantRewordsDetail"
           body: "*"
       };
    }
}

message RewardsParam  {
    string id      = 1;
    int64  amount  = 2;
    string self    = 3;
    string to      = 4;
}

message RewardsParamWithSign  {
    RewardsParam para   = 1;
    string       sign   = 2;
}


message RewardsInfos{
    repeated types.RewardsInfo infos = 1;
}

message RewardsInfosByAddress{
    map<string, RewardsInfos> infos = 1;
}

message ConfidantRewardsResponse{
    map<string, int64> rewards = 1;
}