language: go

go:
  - 1.11.x

os:
  - linux

dist: trusty

sudo: false

before_install:
# Setup dependency management tool
# - go get -u -v github.com/golang/dep/cmd/dep
# - dep ensure
- go get -u golang.org/x/tools/cmd/goimports

env:
 global:
   - GO111MODULE=on

script:
  - ./ci/travis.gofmt.sh
  - ./ci/travis.govet.sh
  - ./ci/travis.codecov.sh
  - make clean all

after_success:
  - bash <(curl -s https://codecov.io/bash)

#before_deploy:
#- make clean all -j2

deploy:
  provider: releases
  api_key:
    secure: VF9+1Ty09k2X850BIOCoMfQG8zkGn2wAA2ioqeggKtytQPyfZ/qtfwP5z0afp+8ZkupFpzfYATS9QIKtHhStiupMNmNzdGPMlEPKbu2okp1+Viy2yP0Rjm+NTT0Hm6aGOVIHGbmDNNkOb8bbisp7xmv5wHkTiP1AYnoYlhgtsGNOAD1IzJs8Pr7gGoHfxuHqFJKmjS1MwRP849P98i6a6eRNJa7Hpv7gLnlTeBj1GdC24wFk5RTTs8llEmxHm6QSmh78MQq8k/sHhnp1hNeCTshMQGGXE4cghHaJUiIBqd63DkXQi65BeAY53ovHTnsgMVd3YBbOu98PxuSGnsaZZ24flXdroSG2EWitoFwfkk1lJ27GMwg1CVcax3TvpxStE9ILVHVngGY++VTg/ZPqeaFt3yHRDe3WZMgNEi7yICbkqJkz6Z35SnN6LDnYAbds/MZYqmWmxuE1ClzoOlNKlefqhjbxqtc2zmW3Fjq6oHyFxZtIOztMVtYuFAlJSTNLXPM4koUOw1+2dSQWvFY2oDnAtyrc/Ho8TP+bPsCdmfnYgLr7DDnIoP2qx/Bf3HjlOMJUkZEWWpAmVDtms6RprlF+dh/V+fmMpODJg+KZQr66azcGuXX5b5iuOZ0YuT0k3RHYLBsoZk49y76FRNXc6ZM5Eu4Gw3QQVdpjH3O7ILE=
  file: build/*
  file_glob: true
  skip_cleanup: true
  on:
    tags: true


notifications:
  email: false
